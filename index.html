<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Daily Challenge</title>
  <!-- Cartoony Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #fef6ff;
      --accent: #ff6ec7;
      --accent-dark: #7c3aed;
      --accent-soft: #ffe0ff;
      --card: #ffffff;
      --text: #2b2136;
      --shadow: rgba(0, 0, 0, 0.15);
      --border-radius: 32px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background:
        radial-gradient(circle at top left, #ff9f1c 0, transparent 45%),
        radial-gradient(circle at top right, #ff6ec7 0, transparent 45%),
        radial-gradient(circle at bottom, #7c3aed 0, #1f102e 60%);
      font-family: "Baloo 2", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      color: var(--text);
      padding: 16px;
    }

    .app-shell {
      width: 380px;
      max-width: 380px;
      background: var(--card);
      border-radius: var(--border-radius);
      box-shadow: 0 18px 40px var(--shadow);
      padding: 24px 20px 28px;
      position: relative;
      overflow: hidden;
    }

    .bubble-bg {
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: 0.22;
      background:
        radial-gradient(circle at 10% 10%, #ff9f1c 0, transparent 55%),
        radial-gradient(circle at 85% 0%, #ff6ec7 0, transparent 55%),
        radial-gradient(circle at 100% 80%, #7c3aed 0, transparent 55%);
      z-index: 0;
    }

    .content { position: relative; z-index: 1; }

    .app-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .app-avatar {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff9f1c, #ff6ec7);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 14px var(--shadow);
      position: relative;
      overflow: hidden;
    }

    .app-avatar-face {
      width: 32px;
      height: 32px;
      background: #fffbf2;
      border-radius: 50%;
      position: relative;
    }

    .app-avatar-face::before,
    .app-avatar-face::after {
      content: "";
      position: absolute;
      width: 6px;
      height: 6px;
      background: #333;
      border-radius: 50%;
      top: 10px;
    }

    .app-avatar-face::before { left: 8px; }
    .app-avatar-face::after { right: 8px; }

    .mouth {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 16px;
      height: 8px;
      border-bottom-left-radius: 16px;
      border-bottom-right-radius: 16px;
      border: 3px solid #333;
      border-top: none;
    }

    .app-title-group { flex: 1; }

    .app-title {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .app-pill {
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px dashed rgba(0, 0, 0, 0.08);
    }

    .app-subtitle {
      font-size: 0.85rem;
      margin-top: 2px;
      opacity: 0.85;
    }

    .streak-bar {
      margin-top: 10px;
      margin-bottom: 10px;
      padding: 10px 14px;
      border-radius: 999px;
      background: linear-gradient(135deg, #7c3aed, #ff6ec7, #ff9f1c);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.18);
      flex-wrap: nowrap;
      white-space: nowrap;
    }

    .streak-bar > div {
      flex-shrink: 0;
    }

    .streak-label { font-size: 0.8rem; opacity: 0.9; }

    .streak-main {
      font-size: 1.1rem;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .streak-best {
      font-size: 0.75rem;
      opacity: 0.9;
      text-align: right;
      white-space: nowrap;
    }

    .challenge-card {
      margin-top: 18px;
      padding: 16px 14px 16px;
      border-radius: 20px;
      background: linear-gradient(135deg, #fce7ff, #ffffff);
      border: 2px solid rgba(124, 58, 237, 0.12);
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.06);
      position: relative;
      overflow: hidden;
    }

    .challenge-card::before {
      content: "";
      position: absolute;
      inset: -40px;
      background-image: repeating-linear-gradient(
        120deg,
        rgba(255, 159, 28, 0.09) 0,
        rgba(255, 159, 28, 0.09) 8px,
        transparent 8px,
        transparent 16px
      );
      opacity: 0.6;
      pointer-events: none;
    }

    .challenge-inner { position: relative; z-index: 1; }

    .challenge-label-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.75rem;
      margin-bottom: 6px;
    }

    .pill {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px dashed rgba(0, 0, 0, 0.08);
    }

    .pill-category {
      background: var(--accent-soft);
      border-color: rgba(255, 110, 199, 0.75);
      font-weight: 600;
    }

    .challenge-text {
      font-size: 1.0rem;
      margin: 6px 0 4px;
      line-height: 1.35;
    }

    .tiny-note {
      font-size: 0.7rem;
      opacity: 0.8;
      margin-top: 2px;
    }

    .card-actions {
      margin-top: 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: stretch;
    }

    .btn-complete {
      width: 100%;
      padding-block: 14px;
      font-size: 1rem;
      background: linear-gradient(135deg, #ff9f1c, #ff6ec7, #7c3aed);
      color: #fff;
      border-radius: 999px;
      border: none;
      font-family: inherit;
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.2);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
    }

    .btn-complete:active {
      transform: translateY(2px) scale(0.985);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      filter: brightness(0.98);
    }

    .status-text {
      font-size: 0.75rem;
      opacity: 0.85;
      text-align: center;
    }

    .footer-note {
      margin-top: 14px;
      font-size: 0.72rem;
      opacity: 0.7;
      text-align: center;
    }

    /* üì± Mobile tweaks */
    @media (max-width: 480px) {
      body {
        padding: 16px;
        justify-content: center;
        align-items: center;
      }

      .app-shell {
        padding: 20px 16px 24px;
        border-radius: var(--border-radius);  /* keep rounded corners */
        max-width: 360px;
        width: 100%;
        min-height: auto;                     /* no forced tall card */
        transform: scale(0.9);                /* zoom down a bit */
        transform-origin: top center;
        margin: 0 auto;
      }

      .app-header {
        align-items: flex-start;
      }

      .app-title {
        font-size: 1.25rem;
      }

      .status-text {
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <div class="bubble-bg"></div>
    <div class="content">
      <header class="app-header">
        <div class="app-avatar">
          <div class="app-avatar-face">
            <div class="mouth"></div>
          </div>
        </div>
        <div class="app-title-group">
          <div class="app-title">
            Daily Challenge
          </div>
        </div>
      </header>

      <div class="streak-bar">
        <div>
          <div class="streak-label">Current streak</div>
          <div class="streak-main" id="streak-value">0 days üî•</div>
        </div>
        <div class="streak-best" id="best-streak">
          Best: 0 days
        </div>
      </div>

      <section class="challenge-card" aria-live="polite">
        <div class="challenge-inner">
          <div class="challenge-label-row">
            <span class="pill pill-category" id="category-pill">Loading‚Ä¶</span>
            <span class="pill" id="date-pill"></span>
          </div>
          <div class="challenge-text" id="challenge-text">
            Getting today‚Äôs mission‚Ä¶
          </div>
          <div class="tiny-note">
            Now do the dang thing.
          </div>
          <div class="card-actions">
            <button class="btn-complete" id="complete-btn">
              ‚úÖ I did it!
            </button>
            <div class="status-text" id="status-text">
              Tap ‚ÄúI did it!‚Äù when you‚Äôve nudged it forward.
            </div>
          </div>
        </div>
      </section>

      <div class="footer-note">
        Your streak lives in this browser. Close the tab, come back tomorrow, keep stacking days. üíú
      </div>
    </div>
  </div>

  <script>
    // Expanded challenge sets (+ Random, weighted litter boxes)
    const CHALLENGES = {
      "Chores": [
        "Tidy one surface you look at a lot (desk, nightstand, coffee table).",
        "Choose one drawer and declutter it for 5‚Äì10 minutes.",
        "Do a quick 10-item pickup around your living space.",
        "Run one load of laundry from start to folded or put away.",
        "Wash all dishes currently visible in the sink.",
        "Take out trash and recycling from the main area.",
        "Wipe down bathroom sink and mirror.",
        "Clear out expired food from the fridge door shelves.",
        "Sweep or vacuum just the highest-traffic area.",
        "Choose one hotspot (chair, counter) and reset it.",
        "Quick-scoop all the litter boxes.",
        "Do a focused 5-minute sweep of stuff on the floor and put things away.",
        "Wipe down kitchen counters and stove top.",
        "Clean out one small section of the fridge or freezer.",
        "Sort and put away any clean laundry hanging around.",
        "Clear off your kitchen table or primary eating spot.",
        "Clean the bathroom toilet and surrounding floor area.",
        "Shake out and reset doormats or rugs at entrances.",
        "Do a mini vacuum of just one room.",
        "Collect cups, mugs, and water bottles from around the house.",
        "Wipe down light switches and door handles in one room.",
        "Water any thirsty houseplants you notice.",
        "Reset your bed: straighten sheets, fluff pillows, fold blankets.",
        "Quickly wipe down the inside of the microwave.",
        "Clean the kitchen sink and wipe the faucet.",
        "Gather stray trash from your car or bag and throw it away.",
        "Clear and wipe one bathroom shelf or ledge.",
        "Deep-clean all litter boxes: scoop, scrub, refill with fresh litter.",
        "Do a quick scan for anything obviously out of place and put away 10 items.",
        "Spot-clean obvious smudges on walls or doors with a damp cloth.",
        "Empty small trash cans in bathroom or bedroom into the main trash.",
        "Sweep or Swiffer a small area that collects crumbs or pet fur.",
        "Fold blankets and straighten pillows on the couch.",
        "Put away shoes lying around in common areas.",
        "Deep-clean all litter boxes again: commit to doing it thoroughly today."
      ],
      "Big Chores": [
        "Spend 15 minutes sorting one 'doom pile' or paperwork stack.",
        "Pick one category of clothes and pull a few to donate or toss.",
        "Schedule one adulting task you‚Äôve been avoiding (doctor, dentist, etc.).",
        "Open your email and unsubscribe from 5+ things you never read.",
        "Spend 15 minutes organizing a closet, shelf, or storage bin.",
        "Cancel one subscription or service you don‚Äôt really use.",
        "Scan or photograph important documents so they‚Äôre backed up.",
        "Pick one financial task: check an account, pay a bill, or move money to savings.",
        "Clear out one bag or box you‚Äôve been ignoring.",
        "Make a micro list of the next 3 steps for a big project you‚Äôve been avoiding.",
        "Do a dedicated 20-minute pass on sorting mail and papers.",
        "Go through one junk drawer and get rid of at least 10 things.",
        "Choose one mystery box or tote and sort through at least half of it.",
        "Do a digital photo cleanout: delete 50‚Äì100 nonsense pictures or screenshots.",
        "Create a 'donate' bag and fill it with at least 5 items.",
        "Review your recurring bills and list them in one place.",
        "Clean out under the bathroom sink and toss expired products.",
        "Choose one kitchen cabinet and reorganize it to be more usable.",
        "Empty and wipe down one shelf of your pantry, toss expired items.",
        "Do a deeper clean of floors in one room (move light furniture if you can).",
        "Deep-clean all litter boxes: dump, wash, refill, wipe surrounding area.",
        "Gather all random cords and cables and do a quick keep/toss sort.",
        "Sort one pile of ‚Äúto file‚Äù papers into keep, shred, recycle.",
        "Declutter one category of possessions (e.g., mugs, tote bags, pens).",
        "Create a small 'outbox' for stuff to leave the house and put 5 items in it.",
        "Spend 15 minutes on a home improvement task you‚Äôve been putting off.",
        "Go through one shelf of books and choose 3‚Äì5 to donate or release.",
        "Do a deeper clean of the bathroom: shower walls, tub, or floor.",
        "Sort through shoes and pick a pair or two to release.",
        "Open your fridge and clean the gunk from at least one drawer.",
        "Tackle the spot you‚Äôve gone visually blind to (corner pile, chair, basket).",
        "Deep-clean all litter boxes again, especially corners and liners.",
        "Do a 20-minute digital cleanout: delete old downloads and organize a folder.",
        "Pick a 'catch-all' flat surface and deal with everything on it.",
        "Do one overdue errand: return, drop-off, post office, or pickup."
      ],
      "Mental Health": [
        "Do a 5-minute body scan and stretch any tight spots.",
        "Write down three tiny things that didn‚Äôt suck today.",
        "Set a 5-minute timer and free-write whatever is in your head.",
        "Spend 10 minutes outside, no phone, just looking around.",
        "Text yourself one kind thing you‚Äôd say to a friend in your situation.",
        "Do 10 slow breaths: 4 in, 4 hold, 6 out.",
        "Put on one song that matches your mood and fully listen, no multitasking.",
        "Identify one thing you can say 'no' to this week to protect your energy.",
        "Name three emotions you felt today, even if they‚Äôre messy.",
        "Plan one small treat or comfort for yourself within the next 48 hours.",
        "Journal for 10 minutes on something you‚Äôre anxious about and list what‚Äôs in your control.",
        "Write a short letter to Future You about what you hope feels easier by then.",
        "List 10 things you‚Äôve survived or gotten through that were genuinely hard.",
        "Do a 5-minute grounding exercise: name 5 things you see, 4 feel, 3 hear, 2 smell, 1 taste.",
        "Pick one belief about yourself and gently question it on paper.",
        "Make a 'safe things' list: people, activities, places that feel regulating.",
        "Take a warm shower or bath with the intention of resetting your nervous system.",
        "Make a list of ‚Äòbare minimum‚Äô days: what‚Äôs an acceptable low-energy routine?",
        "Do a 3-sentence gratitude list that‚Äôs very specific, not generic.",
        "Write down one thing you forgive yourself for today.",
        "Spend 5 minutes daydreaming about a future version of your home or life that feels cozy.",
        "Journal about a boundary you wish you could set, even if you‚Äôre not ready yet.",
        "Write down three compliments you‚Äôve received and let yourself believe them for 60 seconds.",
        "Do one tiny kindness for Future You (layout clothes, prep meds, fill water bottle).",
        "Do a gentle 5-minute stretching routine for neck, shoulders, and hips.",
        "Unfollow or mute one account that spikes anxiety or comparison.",
        "Write one page about what you actually need from your support system.",
        "Do 1‚Äì3 very small physical exercises (like 10 squats or wall pushups) to move some energy.",
        "Spend 5 minutes sitting with your pets and paying attention only to them.",
        "Put your hand on your heart and do 10 slow breaths, reminding yourself you‚Äôre trying.",
        "Journal specifically about anger: what‚Äôs under it, what boundary was crossed.",
        "Make a 'things that help when everything feels loud' list.",
        "Set a 5-minute timer and tidy while thinking of it as an act of care, not punishment.",
        "Pick one worry and write out the worst-case, best-case, and most-likely scenario.",
        "Write a tiny pep talk to yourself in 3‚Äì5 sentences."
      ],
      "Professional Development": [
        "Spend 10 minutes updating one section of your portfolio or resume.",
        "Save one job listing that feels interesting and jot down why.",
        "Add one recent accomplishment or project bullet to your achievements doc.",
        "Watch a 5‚Äì10 minute tutorial or talk related to your field.",
        "Refresh your LinkedIn headline or bio to better reflect you now.",
        "Ask one person for a testimonial, referral, or quick coffee chat.",
        "Curate a 5-item reading or watch list for your professional growth.",
        "Document one process or system you use so Future You can reuse it.",
        "Write a tiny brag list: 3 things you‚Äôre actually good at professionally.",
        "Declutter your downloads folder or desktop of old work files for 10 minutes.",
        "Reply to one networking email or DM you‚Äôve been ignoring (low-pressure).",
        "Update one project case study with better storytelling or outcomes.",
        "List the skills you already have that you‚Äôd want in a teammate.",
        "Revisit an old project and write one paragraph on what you‚Äôd do differently now.",
        "Create a simple 'job search' or 'client outreach' tracker if you don‚Äôt have one.",
        "Do a 10-minute pass on your LinkedIn connections: add or prune thoughtfully.",
        "Skim a couple of job postings and note recurring skills you already have.",
        "Make a list of companies or spaces you‚Äôd genuinely be excited to work in.",
        "Write or refine a short bio you can reuse for intros or websites.",
        "Spend 10 minutes cleaning up your email labels or folders for work-related stuff.",
        "Do a micro 'skills audit': what do you enjoy, tolerate, or hate doing?",
        "Take one baby step toward a certification, class, or learning path (research or bookmark).",
        "Write a short paragraph about the kind of work rhythm you want in the future.",
        "Update your portfolio homepage hero text to feel more like your voice.",
        "Scan your calendar and block one tiny future time slot for focused career work.",
        "Make a list of 5 people you could reach out to if you needed a reference.",
        "Find one example of work (yours or others) that genuinely inspires you and save it.",
        "Sort through one work-related folder and archive what you truly don‚Äôt need.",
        "Create or update a simple financial tracker related to freelance or work income.",
        "Check on taxes: note any estimated payments, forms, or receipts that need gathering.",
        "Organize a 'tax drawer' or digital folder for the current year‚Äôs paperwork.",
        "Write down three ways work could be more humane for you and brainstorm one small move.",
        "Make a list of potential case studies you haven‚Äôt written up yet.",
        "Refine a single bullet point on your resume to be clearer and more impactful.",
        "Spend 10 minutes practicing a short 'about me' aloud so it feels smoother."
      ],
      "Social Skills": [
        "Send a low-pressure 'thinking of you' text to someone safe.",
        "Respond to one message you‚Äôve been putting off, with a short honest reply.",
        "Practice saying 'I need a little time to think about that' out loud.",
        "Compliment someone today (online or in person) in a specific way.",
        "Set a boundary in one tiny way (even if it‚Äôs just 'I can‚Äôt talk right now').",
        "Make a list of 3 people you feel safe with and what you like about them.",
        "Practice a gentle 'no' to a hypothetical invite that doesn‚Äôt work for you.",
        "Write a short script for how to exit a conversation when you‚Äôre tired.",
        "Unfollow or mute one account that makes you feel worse, not better.",
        "Revisit an old message thread that made you feel appreciated.",
        "Reply to a comment or message with a small but genuine connection.",
        "Send a meme or link to someone you haven‚Äôt talked to in a while with no pressure attached.",
        "Write a draft of a hard conversation you might want to have later.",
        "Make a list of conversation openers that feel natural and not forced.",
        "Identify one relationship that feels nourishing and send a small appreciation note.",
        "Identify one relationship that drains you and journal about what feels off.",
        "Practice saying 'Let me get back to you on that' in your own words.",
        "Plan a tiny future hangout or call with someone, even if it‚Äôs loose.",
        "Do a quick audit of social commitments and see if anything needs canceling or scaling down.",
        "Set a 'social budget' for the upcoming week (energy, time, or both).",
        "Write a short message to Past You thanking them for people they chose to keep.",
        "Look up one local community, group, or event that might be your people (no need to join).",
        "Practice a script for asking someone for help or support.",
        "Think of one boundary you‚Äôd like to hold more firmly and write wording for it.",
        "Reconnect with an old friend by sending a photo or memory you share.",
        "Curate your contact favorites list to reflect who you actually reach out to.",
        "Spend 5 minutes visualizing yourself in a future social situation that feels safe and fun.",
        "Write a tiny list of 'green flags' you value in people.",
        "Unsubscribe or leave one group chat or mailing list that only drains you.",
        "Think of one social skill you‚Äôve already improved and give yourself credit.",
        "Send a message asking someone a genuine question about their life.",
        "Practice self-talk around social stuff: remind yourself that you‚Äôre allowed to take up space.",
        "Make a list of topics you love talking about so you can pivot to them in conversations.",
        "Write 2‚Äì3 sentences you can use to end a call or hangout when you‚Äôre done."
      ],
      "Creative": [
        "Do a 5-minute doodle with no goal (lines, shapes, chaos allowed).",
        "Write a 4-sentence micro-story about today as if it‚Äôs a movie scene.",
        "Take three photos around you that feel like a 'color story.'",
        "Brainstorm 10 silly ideas for a future project, no judgment.",
        "Remix something old: reopen a past idea and add one twist.",
        "Make a tiny moodboard (3‚Äì6 images) for a vibe you like.",
        "Write one page or one paragraph of anything, messy on purpose.",
        "Invent a character with a weirdly specific hobby and one secret.",
        "Put on an instrumental track and improvise a little scene in your head.",
        "Spend 10 minutes organizing your creative tools or digital files.",
        "Sketch or outline a room re-design or decor idea for your space.",
        "Write a list of creative projects you‚Äôve started and pick one tiny next step.",
        "Do a quick color study: pick a color and list everything you associate with it.",
        "Write a fake movie synopsis set in your current neighborhood.",
        "Design a tiny logo or symbol for 'Future You' on a scrap of paper.",
        "Pick one object in your space and draw it badly on purpose.",
        "Write a short 'ad' for something that doesn‚Äôt exist but should.",
        "Do a 10-minute playlist curation for a very specific mood or scene.",
        "Take a photo of a corner in your home as if you were documenting a set.",
        "Make a list of creative mediums you‚Äôre curious about but haven‚Äôt tried yet.",
        "Write dialogue between two versions of yourself arguing about something small.",
        "Create a quick visual or written 'map' of one of your favorite memories.",
        "Do a mini declutter of your creative supplies and group like items together.",
        "Write a tiny poem or haiku about whatever you‚Äôre feeling right now.",
        "Spend 10 minutes learning a trick or technique in a creative tool you use.",
        "Doodle or brainstorm on a small home improvement idea (shelves, hooks, lighting).",
        "Draw a simple floor plan of your space and mark where energy feels good or stuck.",
        "Write 5 'taglines' that would go on a poster for your current era.",
        "Do something artistic with what‚Äôs on hand (arrange objects, fold paper, color code books).",
        "Make a quick 'creativity altar' or corner: gather a few inspiring objects together.",
        "Write out the opening scene of a story set on Vavianna Island or a similar world.",
        "Pick one old creative idea and decide if it‚Äôs alive, paused, or ready to be released.",
        "Make a list of characters or archetypes you‚Äôre drawn to and why."
      ],
      "Random": [
        "Deep-clean all litter boxes: dump, wash, refill, and wipe the area around them.",
        "Send a 'thinking of you' text to someone who feels safe.",
        "Delete 50 old photos or screenshots from your phone.",
        "Go through one pile of mail and deal with each piece.",
        "Tidy a single surface you stare at a lot.",
        "Journal for 10 minutes about something you‚Äôre avoiding.",
        "Do 10 squats, 10 wall pushups, or 10 calf raises‚Äîjust to move.",
        "Pick one bill or account and log in to check the status.",
        "Clear out one junk drawer and get rid of at least 10 things.",
        "Sit with your pets for 5 minutes and give them full attention.",
        "Brainstorm 10 ideas for a future creative or life project.",
        "Text someone a meme or link just to connect low-pressure.",
        "Unfollow one account that stresses you out.",
        "Spend 5 minutes outside looking at the sky or trees.",
        "Put away 10 things that are out of place.",
        "Write a quick letter to Future You about something you hope for.",
        "Do a 10-minute digital cleanout of your downloads folder.",
        "Make a tiny list of 3 treats or comforts you can reach for soon.",
        "Clean the bathroom sink, faucet, and mirror.",
        "Look at your calendar and block off a tiny pocket of rest.",
        "Deep-clean all litter boxes again, especially corners and edges.",
        "Organize one shelf of books, games, or media.",
        "Do a 'blind spots' scan: fix or tidy one thing you‚Äôve stopped seeing.",
        "Write down three good things about the version of you who‚Äôs trying.",
        "Start a small 'outbox' and put 5 donate-or-sell items in it.",
        "Do a 3-minute silly dance to one song.",
        "Empty one bag, purse, or backpack and reset it.",
        "Spend 10 minutes learning something new via article or video.",
        "Write a micro-story or scene about a heist involving household objects.",
        "Wipe down light switches and door handles in one room.",
        "Do a quick 'future finances' check-in: glance at balances and breathe.",
        "Choose one neglected corner and give it 10 minutes of focus.",
        "Make a tiny to-do list of 3 items that would make tomorrow easier.",
        "Declutter one category: mugs, pens, notebooks, or tote bags.",
        "Deep-clean the litter box area one more time this week if needed.",
        "Do one errand you‚Äôve been avoiding, or at least plan when you‚Äôll do it."
      ]
    };

    const STORAGE_KEY = "dailyChallengeState_v5";

    function getTodayString() {
      const d = new Date();
      return d.toISOString().slice(0, 10);
    }

    function getYesterdayString() {
      const d = new Date();
      d.setDate(d.getDate() - 1);
      return d.toISOString().slice(0, 10);
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : {};
      } catch (e) {
        console.error("Error loading state:", e);
        return {};
      }
    }

    function saveState(state) {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      } catch (e) {
        console.error("Error saving state:", e);
      }
    }

    // random category + challenge, avoiding same category as last if possible
    function getRandomChallengeAnyCategory(lastCategoryToAvoid) {
      const categories = Object.keys(CHALLENGES);
      if (!categories.length) return null;

      let available = categories;
      if (lastCategoryToAvoid && categories.length > 1) {
        const filtered = categories.filter(c => c !== lastCategoryToAvoid);
        if (filtered.length) available = filtered;
      }

      const catIndex = Math.floor(Math.random() * available.length);
      const category = available[catIndex];
      const pool = CHALLENGES[category] || [];
      if (!pool.length) return null;

      const challengeIndex = Math.floor(Math.random() * pool.length);
      const challenge = pool[challengeIndex];

      return { category, challenge };
    }

    function updateStreakDisplay(state) {
      const streakValueEl = document.getElementById("streak-value");
      const bestStreakEl = document.getElementById("best-streak");
      const streak = state.streak || 0;
      const best = state.bestStreak || 0;
      streakValueEl.textContent = `${streak} day${streak === 1 ? "" : "s"} üî•`;
      bestStreakEl.textContent = `Best: ${best} day${best === 1 ? "" : "s"}`;
    }

    function updateChallengeDisplay(state) {
      const categoryPill = document.getElementById("category-pill");
      const datePill = document.getElementById("date-pill");
      const challengeText = document.getElementById("challenge-text");
      const statusText = document.getElementById("status-text");

      if (state.challenge && state.date) {
        const date = new Date(state.date);
        const dateLabel = date.toLocaleDateString(undefined, {
          weekday: "short",
          month: "short",
          day: "numeric"
        });
        datePill.textContent = dateLabel;
        categoryPill.textContent = state.category || "Random";
        challengeText.textContent = state.challenge;
        statusText.textContent = "Tap ‚ÄúI did it!‚Äù when you‚Äôve nudged it forward.";
      } else {
        categoryPill.textContent = "No challenge yet";
        datePill.textContent = "";
        challengeText.textContent = "Loading today‚Äôs mission‚Ä¶";
        statusText.textContent = "Streak updates when you mark today‚Äôs mission done.";
      }
    }

    function friendlyStatus(message) {
      const statusText = document.getElementById("status-text");
      statusText.textContent = message;
    }

    function ensureTodayMission(state) {
      const todayStr = getTodayString();
      if (state.date === todayStr && state.challenge) return state;

      const lastCategory = state.category || null;
      const result = getRandomChallengeAnyCategory(lastCategory);
      if (!result) return state;

      state.date = todayStr;
      state.category = result.category;
      state.challenge = result.challenge;
      saveState(state);
      return state;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const completeBtn = document.getElementById("complete-btn");
      let state = loadState();

      state = ensureTodayMission(state);
      updateChallengeDisplay(state);
      updateStreakDisplay(state);

      completeBtn.addEventListener("click", () => {
        const todayStr = getTodayString();
        const yesterdayStr = getYesterdayString();
        state = loadState();

        if (!state.challenge || state.date !== todayStr) {
          friendlyStatus("No mission for today yet.");
          return;
        }

        if (state.lastCompletedDate === todayStr) {
          friendlyStatus("Already counted today. Extra effort = secret bonus XP.");
          return;
        }

        const prev = state.lastCompletedDate;
        if (prev === yesterdayStr) {
          state.streak = (state.streak || 1) + 1;
        } else {
          state.streak = 1;
        }

        state.lastCompletedDate = todayStr;
        state.bestStreak = Math.max(state.bestStreak || 0, state.streak || 0);

        saveState(state);
        updateStreakDisplay(state);
        friendlyStatus("Streak updated. ü•≥");
      });
    });
  </script>
</body>
</html>
